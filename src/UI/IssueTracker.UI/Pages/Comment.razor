@page "/Comment/{Id}"

@attribute [Authorize]

@inject AuthenticationStateProvider AuthProvider
@inject NavigationManager NavManager
@inject IIssueService IssueService
@inject ICommentService CommentService
@inject IUserService UserService

<h1 class="page-heading text-light text-uppercase mb-4">Comment on an Issue</h1>

<div class="row justify-content-center create-form">
	<div class="col-xl-8 col-lg-10 form-layout">
		@if (_issue is not null)
		{
			<div class="row issue-detail-row">
				<div class="col-11 issue-detail">
					<div>
						<div class="issue-detail-date">
							<div>@_issue.DateCreated.ToString("MM.dd.yyyy")</div>
						</div>
					</div>
					<div class="issue-detail-text">
						<div class="fw-bold mb-2 issue-detail-issue">@_issue.Title</div>
						<div class="mb-2 suggestion-detail-author">@_issue.Author.DisplayName</div>
						<div class="mb-2 d-none d-md-block">@_issue.Description</div>
						<div class="suggestion-entry-text-category d-none d-md-block">
							@_issue.Category.CategoryName
						</div>
					</div>
				</div>
				<div class="col-1 close-button-section">
					<button id="close-page" class="btn btn-close" @onclick="ClosePage"></button>
				</div>
			</div>
			<div class="row d-block d-md-none">
				<div class="issue-detail-text">
					<div>@_issue.Description</div>
					<div class="text-category">
						@_issue.Category.CategoryName
					</div>
				</div>
			</div>
			<EditForm Model="_comment" OnValidSubmit="CreateComment">
				<DataAnnotationsValidator />
				<ValidationSummary />
				<div class="input-section">
					<label class="form-label fw-bold text-uppercase" for="title">Title of the Comment</label>
					<div class="input-description">Brief title of the Comment.</div>
					<InputTextArea class="form-control" id="title" @bind-Value="_comment.Title" />
				</div>
				<div class="input-section">
					<label class="form-label fw-bold text-uppercase" for="desc">Comment On the Issue</label>
					<div class="input-description">Give, in full your comments.</div>
					<InputTextArea class="form-control" id="desc" @bind-Value="_comment.Description" />
				</div>
				<div class="center-children">
					<button id="submit-comment" class="btn btn-main btn-lg text-uppercase" type="submit">Create Comment</button>
				</div>
			</EditForm>
		}
	</div>
</div>